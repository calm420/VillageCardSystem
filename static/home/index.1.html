<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>小蚂蚁智慧班牌11111</title>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/skin/skin_middleSchool.css">
    <link rel="stylesheet" href="../css/skin/skin_primarySchool.css">
    <link rel="stylesheet" href="../css/skin/skin_default.css">
    <link rel="stylesheet" href="../css/homePage/header.css">
    <link rel="stylesheet" href="../css/classCardHomePage.css">
    <script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
    <script type="text/javascript" src="../js/webServiceUtil.js"></script>
    <script src="https://www.maaee.com/Excoord_PhoneService/js/jsbridge.js?v=18"></script>
    <script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="./layer/layer.js"></script>
    <script type="text/javascript" src="../js/webServiceUtil.js"></script>
    <script type="text/javascript" src="./asset/js/msg_websocket_connection.js?v=0.0.1"></script>
    <script type="text/javascript" src="../js/simple_websocket_connection.js"></script>
    <script type="text/javascript" src="./asset/js/home.js?v=0.0.3"></script>
    <script type="text/javascript" src="http://maaee.com/Excoord_For_Education/jwplayer-7.1.4/jwplayer.js"></script>

</head>

<body>
    <div id="skin_default" name="homeDiv">
        <div id="classCardHomePage">
            <div>
                <iframe id="header" src=""></iframe>
            </div>
            <div class="home_content home_content_index">
                <div class="home_left">
                    <!-- 今日值日 -->
                    <div class="studentOnDuty-wrap">
                        <iframe id="studentOnDuty" class="home_card studentOnDuty_height" src=""></iframe>
                    </div>
                    <!-- 德育评分 -->
                    <div class="moralEducationScore-wrap">
                        <iframe id="moralEducationScore" class="home_card moralEducationScore_height" src=""></iframe>
                    </div>
                </div>
                <div class="home_center">
                    <!-- 班级风采 -->
                    <div>
                        <iframe id="classDemeanor" class="home_card classDemeanor_height" src=""></iframe>
                    </div>
                    <!-- 通知 -->
                    <div>
                        <iframe id="notify" class="home_card notify_height" src=""></iframe>
                    </div>
                    <!-- 应用 -->
                    <div>
                        <iframe id="application" class="application_height home_card" src=""></iframe>
                    </div>
                </div>
                <div class="home_right">
                    <!-- 今日课程 -->
                    <div>
                        <iframe id="courseOfToday" class="home_card course_height" src=""></iframe>
                    </div>
                    <!-- 本节考勤 -->
                    <div>
                        <iframe id="courseAttendance" class="home_card currentAttendance_height" src=""></iframe>
                    </div>
                </div>
            </div>
            <div id='videoPlayerMask' style="display: none">
                <span class="close" onClick="closePlayerMask()">关闭</span>
                <!-- <div id="video_container"></div> -->
                <video id="videoPlayerAr" controls="controls" minLength={100} autoplay playsinline="true" webkit-playsinline="true" controlslist="nodownload nofullscreen"
                    x5-video-player-type="h5" playsinline webkit-playsinline>
                    <source type="video/mp4" src="" />
                </video>
                <img id="imagePlayerAr" src="" alt="">
            </div>
            <div id="pushVideoPlay-mask" class="pushVideoPlay-mask" style="display:none">
                <div id='pushVideoPlay' class="pushVideoPlay" style="display:none">
                    <video id="videoPlayBox" minLength={100} muted loop autoplay controls preload metadata>
                        <!-- <video id="videoPlayBox" minLength={100} autoplay preload loop controls> -->
                    </video>
                </div>
            </div>
            <div id='notifyMask' class="notifyMask" style="display: none">
                <div class="am-modal-wrap ">
                    <div class="notify_contModal">
                        <div class="am-modal-content">
                            <span class="closeNotify am-modal-close" onClick="closeNotifyMask()">
                                <span class="am-modal-close-x"></span>
                            </span>
                            <div class="am-modal-header">
                                <div class="am-modal-title notifyTitle"></div>
                            </div>
                            <div class="am-modal-body">
                                <div class="cont notifyContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript">

    function playImage(src) {

      
        console.log(src, 'home');
        document.getElementById('videoPlayerMask').style.display = 'block';
        //        document.getElementById("videoPlayerAr").onended = function () {
        //            closePlayerMask()
        //        };
        document.getElementById('videoPlayerAr').style.display = 'none';
        //        setTimeout(function () {
        document.getElementById('imagePlayerAr').src = src;
        //        }, 300)
    }

    // function playVideo(url) {
        
    //     // event.stopPropagation();
    //     var data = {
    //         method: 'playChatVideo',
    //         playUrl: url
    //     };
    //     window.parent.Bridge.callHandler(data, function () {
    //     }, function (error) {
    //         // Toast.info('开启视频失败!');
    //     });
    // }

    function playVideo(src) {
        document.getElementById('videoPlayerMask').style.display = 'block';
        // var player = jwplayer("video_container");
        // player.setup( {
        //         flashplayer : "jwplayer-7.1.4/jwplayer.flash.swf",
        //         file:src,
        //         height : "640px",
        //         width : "480px",
        //         autostart: "true",
        //         key:"SDnkHp5Hi4XisjVuu98zy21MC6ZasMZdMazMFw=="
        //    });
        document.getElementById('videoPlayerAr').style.display = 'block';
        document.getElementById("videoPlayerAr").onended = function () {
            closePlayerMask()
        };
        setTimeout(function () {
            document.getElementById('videoPlayerAr').src = src;
            document.getElementById('videoPlayerAr').play();
        }, 300)
    }


    // function playPushVideo(src) {
    //     document.getElementById('pushVideoPlay-mask').style.display = 'block'
    //     document.getElementById('pushVideoPlay').style.display = 'block'
    //     setTimeout(function () {
    //         document.getElementById('videoPlayBox').src = src;
    //         // document.getElementById("videoPlayBox").addEventListener("ended",function(){
    //         //     document.getElementById('videoPlayBox').muted = false;
    //         // })
    //         setTimeout(function () {
    //             console.log(document.getElementById('videoPlayBox').duration, "duration")
    //             document.getElementById('videoPlayBox').muted = false;
    //             document.getElementById('videoPlayBox').addEventListener("timeupdate", function () {
    //                 var timeDisplay;
    //                 //用秒数来显示当前播放进度
    //                 timeDisplay = Math.floor(document.getElementById('videoPlayBox').currentTime);
    //                 // alert(Math.floor(document.getElementById('videoPlayBox').currentTime))
    //                 console.log(Math.floor(document.getElementById('videoPlayBox').currentTime), "duration")
    //                 // console.log(Math.floor(document.getElementById('videoPlayBox').duration,"duration"))
    //                 //当视频播放到 4s的时候做处理
    //                 if (timeDisplay == 4) {
    //                     //处理代码
    //                 }
    //             }, false);
    //         }, 300)

    //     }, 300)
    //     // document.getElementById("videoPlayBox").onended = function () {
    //     //     alert("3456")
    //     //     document.getElementById("videoPlayBox").play();
    //     // };


    // }

    // function closePushVideoMask() {
    //     document.getElementById('videoPlayBox').pause();
    //     document.getElementById('videoPlayBox').src = "";
    //     document.getElementById('pushVideoPlay').style.display = 'none'
    //     document.getElementById('pushVideoPlay-mask').style.display = 'none'
    // }

    function closePlayerMask() {
        document.getElementById('videoPlayerAr').pause();
        document.getElementById('videoPlayerAr').src = "";
        document.getElementById('videoPlayerMask').style.display = 'none';
        document.getElementById('imagePlayerAr').src = "";
    }


    function getNotifyData(notifyTitle, notifyContent) {
        document.getElementById('notifyMask').style.display = 'block';
        $(".notifyTitle").html(notifyTitle)
        $(".notifyContent").html(notifyContent)
    }

    function closeNotifyMask() {
        document.getElementById('notifyMask').style.display = 'none';
    }

</script>

</html>